<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Wallet</title>
    <link rel="icon" href="{{ url_for('static', filename='images/yr-high-resolution-logo-transparent.png') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/receive.css') }}">
</head>

<body>
    <div class="container">
        <aside class="sidebar">
            <!-- Logo at the top -->
            <div class="logo" onclick="window.location.href='/'">
                <img src="{{ url_for('static', filename='images/yr-high-resolution-logo-transparent.png') }}" alt="Logo">
                <div class="logo-name">
                    <h2>YashRaj</h2>
                </div>
            </div>
            <!-- Sections -->
            <div class="sections">
                <div class="menu-item highlight-account" id="account" onclick="window.location.href='/account'" >
                    <div class="rectangle-indicator"></div> <!-- Rectangle indicator -->
                    <div class="icon">
                        <img src="{{ url_for('static', filename='images/account.png') }}" alt="Account Icon">
                    </div>
                    <div class="text">
                        <h2>Account</h2>
                    </div>
                </div>
                <div class="menu-item highlight-wallet" id="wallet" onclick="window.location.href='/'">
                    <div class="rectangle-indicator"></div> <!-- Rectangle indicator -->
                    <div class="icon">
                        <img src="{{ url_for('static', filename='images/wallet.png') }}" alt="Wallet Icon">
                    </div>
                    <div class="text">
                        <h2>Wallet</h2>
                    </div>
                </div>
                <div class="menu-item highlight-send" id="send" onclick="window.location.href='/send'">
                    <div class="rectangle-indicator"></div> <!-- Rectangle indicator -->
                    <div class="icon">
                        <img src="{{ url_for('static', filename='images/send.png') }}" alt="Send Icon">
                    </div>
                    <div class="text">
                        <h2>Send</h2>
                    </div>
                </div>
                <div class="menu-item highlight-receive" id="receive" onclick="window.location.href='/receive'">
                    <div class="rectangle-indicator"></div> <!-- Rectangle indicator -->
                    <div class="icon">
                        <img src="{{ url_for('static', filename='images/receive.png') }}" alt="Receive Icon">
                    </div>
                    <div class="text">
                        <h2>Receive</h2>
                    </div>
                </div>
                <div class="menu-item highlight-buy-crypto" id="buy-crypto">
                    <div class="rectangle-indicator"></div> <!-- Rectangle indicator -->
                    <div class="icon">
                        <img src="{{ url_for('static', filename='images/buy.png') }}" alt="Buy Crypto Icon">
                    </div>
                    <div class="text">
                        <h2>Buy Crypto</h2>
                    </div>
                </div>
                <div class="menu-item highlight-sell-crypto" id="sell-crypto">
                    <div class="rectangle-indicator"></div> <!-- Rectangle indicator -->
                    <div class="icon">
                        <img src="{{ url_for('static', filename='images/sell.png') }}" alt="Sell Crypto Icon">
                    </div>
                    <div class="text">
                        <h2>Sell Crypto</h2>
                    </div>
                </div>
                <div class="menu-item highlight-history" id="history">
                    <div class="rectangle-indicator"></div> <!-- Rectangle indicator -->
                    <div class="icon">
                        <img src="{{ url_for('static', filename='images/history.png') }}" alt="History Icon">
                    </div>
                    <div class="text">
                        <h2>History</h2>
                    </div>
                </div>
                <div class="menu-item highlight-exit" id="exit">
                    <div class="rectangle-indicator"></div> <!-- Rectangle indicator -->
                    <div class="icon">
                        <img src="{{ url_for('static', filename='images/exit.png') }}" alt="Exit Icon">
                    </div>
                    <div class="text">
                        <h2>Exit</h2>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Right sidebar for coin listing and search -->
        <aside class="right-sidebar">
            <div class="search-container">
                <img src="{{ url_for('static', filename='images/search-interface-symbol.png') }}" alt="Search Icon" class="search-icon">
                <input type="text" id="coin-search" placeholder="Search..." oninput="filterCoins()">
            </div>

            <div id="coin-list" class="coin-list">
                <div class="coin-item" data-coin-type="bitcoin">
                    <div class="icon">
                        <img src="{{ url_for('static', filename='images/bitcoin.png') }}" alt="Bitcoin Icon">
                    </div>
                    <div class="text">
                        <h2>Bitcoin (BTC)</h2>
                    </div>
                </div>

                <div class="coin-item" data-coin-type="ethereum">
                    <div class="icon">
                        <img src="{{ url_for('static', filename='images/ethereum.png') }}" alt="Ethereum Icon">
                    </div>
                    <div class="text">
                        <h2>Ethereum (ETH)</h2>
                    </div>
                </div>

                <div class="coin-item" data-coin-type="solana">
                    <div class="icon">
                        <img src="{{ url_for('static', filename='images/solana.png') }}" alt="Solana Icon">
                    </div>
                    <div class="text">
                        <h2>Solana (SOL)</h2>
                    </div>
                </div>

                <div class="coin-item" data-coin-type="binance">
                    <div class="icon">
                        <img src="{{ url_for('static', filename='images/bnb.png') }}" alt="Binance Coin Icon">
                    </div>
                    <div class="text">
                        <h2>Binance Coin (BNB)</h2>
                    </div>
                </div>

                <div class="coin-item" data-coin-type="avalanche">
                    <div class="icon">
                        <img src="{{ url_for('static', filename='images/avalanche.png') }}" alt="Avalanche Icon">
                    </div>
                    <div class="text">
                        <h2>Avalanche (AVAX)</h2>
                    </div>
                </div>

                <div class="coin-item" data-coin-type="optimism">
                    <div class="icon">
                        <img src="{{ url_for('static', filename='images/optimism.png') }}" alt="optimism Icon">
                    </div>
                    <div class="text">
                        <h2>Optimism (OPM)</h2>
                    </div>
                </div>

                <div class="coin-item" data-coin-type="arbitrum">
                    <div class="icon">
                        <img src="{{ url_for('static', filename='images/arbitrum.png') }}" alt="arbitrum Icon">
                    </div>
                    <div class="text">
                        <h2>Arbitrum (ARB)</h2>
                    </div>
                </div>

                <div class="coin-item" data-coin-type="fantom">
                    <div class="icon">
                        <img src="{{ url_for('static', filename='images/fantom.png') }}" alt="fantom Icon">
                    </div>
                    <div class="text">
                        <h2>Fantom (FTM)</h2>
                    </div>
                </div>

                <div class="coin-item" data-coin-type="conflux">
                    <div class="icon">
                        <img src="{{ url_for('static', filename='images/conflux.png') }}" alt="conflux Icon">
                    </div>
                    <div class="text">
                        <h2>Conflux (CFX)</h2>
                    </div>
                </div>

                <div class="coin-item" data-coin-type="kava">
                    <div class="icon">
                        <img src="{{ url_for('static', filename='images/kava.png') }}" alt="kava Icon">
                    </div>
                    <div class="text">
                        <h2>Kava (KAVA)</h2>
                    </div>
                </div>

                <div class="coin-item" data-coin-type="moonbeam">
                    <div class="icon">
                        <img src="{{ url_for('static', filename='images/moonbeam.png') }}" alt="moonbeam Icon">
                    </div>
                    <div class="text">
                        <h2>Moonbeam (GLMR)</h2>
                    </div>
                </div>

            </div>
        </aside>

        <main class="content">
            <div id="address-container">
                <h1>Your {{ coin_type | capitalize }} Address:</h1>
                <p id="ethereum-address">{{ public_key }}</p>
                <a href="javascript:void(0)" onclick="copyAddress()" class="copy-icon">
                    <img src="{{ url_for('static', filename='images/copy.png') }}" alt="Copy Icon">
                </a>
                <br>
                <img id="qr-code" src="{{ qr_code_url }}" alt="QR Code">
                <div class="button-container">
                    <div class="email-container">
                        <a href="mailto:?subject=YashRaj {{ coin_type | capitalize }} Address&body=My YashRaj {{ coin_type | capitalize }} address is:%0A{{ public_key }}" class="email-icon">
                            <img src="{{ url_for('static', filename='images/mail.png') }}" alt="Email Icon">
                        </a>
                        <p class="email-label">
                            <span class="email-label-line">Email this</span><br>
                            <span class="email-label-line">Address</span>
                        </p>
                    </div>
                    <div class="view-container">
                        <a href="{{ explorer_url }}" class="view-link" target="_blank">
                            <img src="{{ url_for('static', filename='images/link.png') }}" alt="View Icon" class="view-icon">
                        </a>
                        <p class="view-label">
                            <span class="view-label-line">View on</span><br>
                            <span class="view-label-line">Blockchain</span>
                        </p>
                    </div>
                </div>


            </div>
        </main>

    </div>

<script>
    function filterCoins() {
        const query = document.getElementById('coin-search').value.toLowerCase();
        const coinItems = document.querySelectorAll('#coin-list .coin-item');
        coinItems.forEach(item => {
            const text = item.textContent.toLowerCase();
            if (text.includes(query)) {
                item.style.display = 'block'; // Show item
            } else {
                item.style.display = 'none';  // Hide item
            }
        });
    }

    function showAddress(address, coinType) {
        document.getElementById('address-container').style.display = 'flex';
        document.getElementById('ethereum-address').textContent = address;
        document.getElementById('qr-code').style.display = 'block';

        // Update the heading to reflect the coin type
        document.querySelector('h1').textContent = `Your ${coinType} Address:`;
    }

    function copyAddress() {
        const address = document.getElementById('ethereum-address').textContent;
        navigator.clipboard.writeText(address).then(() => {
            alert('Address copied to clipboard!');
        });
    }

    function handleCoinClick(coinName) {
        const coinType = coinName.toLowerCase();
        window.location.href = `/receive?coin_type=${coinType}`;
    }

    document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('.coin-item').forEach(item => {
            item.addEventListener('click', function() {
                const coinName = this.querySelector('.text h2').textContent.trim();
                handleCoinClick(coinName);
            });
        });

        // Check if coin_type is in the query string
        const urlParams = new URLSearchParams(window.location.search);
        const coinType = urlParams.get('coin_type');

        if (coinType) {
            // Fetch and display address for the selected coin type
            fetch(`/receive?coin_type=${coinType}`)
                .then(response => response.json())
                .then(data => {
                    if (data.public_key) {
                        showAddress(data.public_key, coinType.charAt(0).toUpperCase() + coinType.slice(1));
                    } else {
                        console.error('Public key not found');
                    }
                })
                .catch(error => {
                    console.error('Error fetching address:', error);
                });
        }
    });



</script>


</body>

</html>
